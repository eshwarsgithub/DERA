================================================================================
                    üéØ SFMC SYNC - QUICK REFERENCE CARD
================================================================================

YOUR GOAL
---------
Connect DERA app to your Salesforce Marketing Cloud to pull REAL data

CURRENT STATE: Sample data (2 fake DEs)
TARGET STATE:  All your real SFMC Data Extensions with lineage

================================================================================
                          üöÄ 5-STEP QUICK START
================================================================================

STEP 1: SFMC - Create Installed Package
----------------------------------------
Location: SFMC ‚Üí Setup ‚Üí Apps ‚Üí Installed Packages
Action:   Click "New" ‚Üí Name: "DERA Lineage Tool"
          Add Component ‚Üí API Integration ‚Üí Server-to-Server

Permissions to check:
  ‚òë Data Extensions: Read
  ‚òë Automation: Read
  ‚òë Journeys: Read
  ‚òë Assets: Read

STEP 2: SFMC - Copy Credentials
--------------------------------
After saving, copy these values:
  ‚Ä¢ Client ID
  ‚Ä¢ Client Secret
  ‚Ä¢ Authentication Base URI
  ‚Ä¢ REST Base URI
  ‚Ä¢ SOAP Base URI

Also find:
  ‚Ä¢ Your MID (Setup ‚Üí My Organization)

STEP 3: Local - Create .env.local
----------------------------------
In terminal:
  cd /Users/eshwar/Desktop/DERA
  cp .env.example .env.local

Edit .env.local and paste your values from Step 2:
  SFMC_CLIENT_ID=<your_client_id>
  SFMC_CLIENT_SECRET=<your_secret>
  SFMC_AUTH_BASE_URL=https://<subdomain>.auth.marketingcloudapis.com
  SFMC_REST_BASE_URL=https://<subdomain>.rest.marketingcloudapis.com
  SFMC_SOAP_BASE_URL=https://<subdomain>.soap.marketingcloudapis.com
  SFMC_ACCOUNT_ID=<your_mid>

STEP 4: Test Connection
------------------------
Run:
  node tools/test-sfmc-connection.js

Expected output:
  ‚úÖ All required variables are set!
  ‚úÖ Token acquired successfully!
  ‚úÖ REST API connection successful!
  ‚úÖ SOAP API connection successful!
  ‚úÖ Found 50+ Data Extensions

STEP 5: Restart & View
-----------------------
Restart dev server:
  npm run dev

Open browser:
  http://localhost:3000/des

You should now see YOUR real SFMC Data Extensions!

================================================================================
                        üìö DOCUMENTATION INDEX
================================================================================

For quick setup:
  ‚Üí SFMC_SYNC_QUICKSTART.md          (Start here!)

To track progress:
  ‚Üí SFMC_SETUP_CHECKLIST.md          (Check off as you go)

For detailed guide:
  ‚Üí docs/SFMC_SETUP_GUIDE.md         (Step-by-step with screenshots)

To understand how it works:
  ‚Üí docs/SFMC_ARCHITECTURE.md        (Technical deep dive)

For complete overview:
  ‚Üí SFMC_SYNC_COMPLETE_GUIDE.md      (Everything explained)

Updated README:
  ‚Üí README.md                         (General project info)

Test script:
  ‚Üí tools/test-sfmc-connection.js    (Validate setup)

Code (for reference):
  ‚Üí src/lib/sfmcClient.ts            (The actual sync logic)

================================================================================
                          üîß TROUBLESHOOTING
================================================================================

ERROR: "SFMC env not configured"
  ‚Üí Create .env.local file with credentials

ERROR: "Token error 401"
  ‚Üí Check Client ID and Client Secret are correct
  ‚Üí Verify no extra spaces when copying

ERROR: "Token error 403"
  ‚Üí Check API permissions in installed package
  ‚Üí Ensure "Data Extensions: Read" is checked

ERROR: Still seeing sample data
  ‚Üí Restart dev server: npm run dev
  ‚Üí Check .env.local exists in project root
  ‚Üí Verify no typos in environment variables

ERROR: Connection refused
  ‚Üí Check subdomain URLs match your SFMC instance
  ‚Üí Verify firewall/network isn't blocking

HELP: Can't find subdomain
  ‚Üí Look at SFMC URL when logged in
  ‚Üí Or check Installed Package page for full URLs

HELP: Can't find MID
  ‚Üí SFMC ‚Üí Setup ‚Üí Settings ‚Üí My Organization
  ‚Üí Look for "MID" or "Member ID"

================================================================================
                         ‚ö° QUICK COMMANDS
================================================================================

Test SFMC connection:
  node tools/test-sfmc-connection.js

Start dev server:
  npm run dev

View Data Extensions:
  Open: http://localhost:3000/des

View Mind Map:
  Open: http://localhost:3000/mindmap

Check if .env.local exists:
  ls -la .env.local

View current environment (don't commit output!):
  grep SFMC .env.local

================================================================================
                           üéØ SUCCESS METRICS
================================================================================

You're done when:
  ‚úÖ Test script passes all checks
  ‚úÖ Real SFMC DEs show in browser
  ‚úÖ DE count matches SFMC
  ‚úÖ Risk scores calculated from real fields
  ‚úÖ Mind map shows real automations/journeys

================================================================================
                        üîí SECURITY REMINDERS
================================================================================

  ‚ö†Ô∏è  NEVER commit .env.local to Git
  ‚ö†Ô∏è  Keep Client Secret secure (treat like a password)
  ‚ö†Ô∏è  .env.local is already in .gitignore - keep it that way!
  ‚ö†Ô∏è  Credentials never sent to browser (server-side only)
  ‚ö†Ô∏è  Only grant minimum required permissions

================================================================================
                           üìä WHAT GETS SYNCED
================================================================================

From SFMC                      To DERA App
----------------------------------------------------------------------
Data Extensions (metadata)  ‚Üí  /des table (all DEs)
Fields (name, type)         ‚Üí  Field lists with PII detection
Journeys                    ‚Üí  Lineage map (downstream usage)
Automations                 ‚Üí  Lineage map (queries, activities)
Query Activities            ‚Üí  Lineage map (transformations)
Imports                     ‚Üí  Lineage map (upstream sources)
CloudPages                  ‚Üí  Lineage map (web page usage)

NOT synced (privacy/performance):
  ‚úó Actual subscriber data
  ‚úó Email content
  ‚úó Row data from DEs
  (Only METADATA is synced, not actual data values!)

================================================================================
                           ‚è±Ô∏è TIME ESTIMATE
================================================================================

  SFMC setup:           5-10 minutes
  Copy credentials:     5 minutes
  Create .env.local:    2 minutes
  Test:                 1 minute
  Restart server:       30 seconds
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  TOTAL:                ~15-20 minutes

================================================================================
                         üéì HOW IT WORKS (BRIEF)
================================================================================

  1. User visits /des page
  2. Next.js API route calls fetchDataExtensions()
  3. sfmcClient.ts checks for SFMC_CLIENT_ID
  4. If found: Requests OAuth token from SFMC
  5. Uses token to fetch Data Extensions via SOAP API
  6. Scans each field for PII (Email, Phone, DOB, etc.)
  7. Calculates risk score based on PII + usage
  8. Returns enriched data to frontend
  9. UI displays table with risk scores and actions

  If SFMC not configured ‚Üí Returns sample data instead!

================================================================================
                          üìû NEED MORE HELP?
================================================================================

  Read:   SFMC_SYNC_QUICKSTART.md
  Run:    node tools/test-sfmc-connection.js
  Check:  Error messages (they're usually clear!)
  Review: Troubleshooting section in any guide

================================================================================
                              üöÄ START HERE
================================================================================

  Open and follow: SFMC_SYNC_QUICKSTART.md

  OR if you prefer a checklist: SFMC_SETUP_CHECKLIST.md

================================================================================

                    Good luck! You've got this! üí™

================================================================================
